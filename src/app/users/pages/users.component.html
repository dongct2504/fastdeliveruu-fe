<div *ngIf="userProfile" class="container mt-5">
    <div class="card mb-5 shadow-sm p-4">
        <div class="row">
            <!-- left -->
            <div class="col-md-4 text-center">
                <div class="profile-img-wrapper mb-4">
                    <img [src]="userProfile.imageUrl || '../../assets/images/default.jpg'"
                        alt="{{userProfile.userName}}" class="rounded-circle img-fluid border shadow"
                        style="width: 180px; height: 180px; object-fit: cover;">
                </div>
                <h3 class="card-title">{{userProfile.firstName}} {{userProfile.lastName}}</h3>
                <p class="text-muted">@{{userProfile.userName}}</p>
            </div>

            <!-- right -->
            <div class="col-md-8">
                <div class="mb-4">
                    <h4 class="mb-3">Hồ sơ người dùng</h4>
                    <p><strong>Email:</strong> {{userProfile.email}}</p>
                    <div>
                        <strong>Số điện thoại:</strong> {{userProfile.phoneNumber}}
                        <span *ngIf="userProfile.phoneNumberConfirmed" class="small">
                            (Đã xác thực)
                        </span>
                        <span *ngIf="!userProfile.phoneNumberConfirmed" class="small">
                            (Chưa xác thực)
                        </span>
                        <div class="mt-2">
                            <a class="btn btn-outline-primary btn-sm me-2" 
                                (click)="updatePhoneNumber()">
                                Cập nhật số điện thoại
                            </a>
                            <button type="button" class="btn btn-outline-primary btn-sm" 
                                (click)="initiatePhoneNumberConfirmation()">
                                Gửi xác nhận số điện thoại
                            </button>
                        </div>
                    </div>
                </div>

                <div *ngIf="userProfile.houseNumber || userProfile.streetName || userProfile.cityId || userProfile.districtId || userProfile.wardId"
                    class="mb-4">
                    <h4 class="mb-3">Địa chỉ</h4>
                    <p *ngIf="userProfile.houseNumber || userProfile.streetName || city || district || ward">
                        <strong>Đường:</strong> {{userProfile.houseNumber}} {{userProfile.streetName}} <br />
                        <strong>Phường:</strong> {{ward?.name || 'N/A'}} <br />
                        <strong>Quận:</strong> {{district?.name || 'N/A'}} <br />
                        <strong>Thành phố:</strong> {{city?.name || 'N/A'}}
                    </p>
                </div>

                <div *ngIf="userProfile.latitude && userProfile.longitude" class="mb-4">
                    <h4 class="mb-3"><i class="fas fa-location-arrow"></i> Location</h4>
                    <p><strong>Latitude:</strong> {{userProfile.latitude}}</p>
                    <p><strong>Longitude:</strong> {{userProfile.longitude}}</p>
                </div>
            </div>
        </div>
    </div>
</div>