<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>{{ isEditMode ? 'Chỉnh sửa nhà hàng' : 'Thêm mới nhà hàng' }}</h3>
        <button class="btn btn-secondary" (click)="cancel()">
            <i class="bi bi-arrow-left"></i> Quay lại
        </button>
    </div>

    <form [formGroup]="restaurantForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">Tên nhà hàng</label>
                <input type="text" formControlName="name" class="form-control" />
                <div *ngIf="restaurantForm.get('name')?.invalid && restaurantForm.get('name')?.touched" class="text-danger">
                    Tên nhà hàng là bắt buộc
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <label class="form-label">Số điện thoại</label>
                <input type="text" formControlName="phoneNumber" class="form-control" />
                <div *ngIf="restaurantForm.get('phoneNumber')?.invalid && restaurantForm.get('phoneNumber')?.touched" class="text-danger">
                    Số điện thoại là bắt buộc
                </div>
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label">Mô tả</label>
            <textarea formControlName="description" class="form-control" rows="3"></textarea>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">Số nhà</label>
                <input type="text" formControlName="houseNumber" class="form-control" />
            </div>
            <div class="col-md-6 mb-3">
                <label class="form-label">Tên đường</label>
                <input type="text" formControlName="streetName" class="form-control" />
            </div>
        </div>

        <div class="row">
            <div class="col-sm-4">
                <select 
                    class="form-control" formControlName="cityId" 
                    (change)="onCityChange($event)"
                >
                    <option value="" disabled selected>Chọn thành phố</option>
                    <option *ngFor="let city of cities" [value]="city.id">{{ city.name }}</option>
                </select>
            </div>
            
            <div class="col-sm-4">
                <select 
                    class="form-control" 
                    formControlName="districtId" 
                    (change)="onDistrictChange($event)"
                >
                    <option value="" disabled selected>Chọn quận</option>
                    <option *ngFor="let district of districts" [value]="district.id">{{ district.name }}</option>
                </select>
            </div>
            
            <div class="col-sm-4">
                <select class="form-control" formControlName="wardId">
                    <option value="" disabled selected>Chọn phường</option>
                    <option *ngFor="let ward of wards" [value]="ward.id">{{ ward.name }}</option>
                </select>
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label">Ảnh đại diện</label>
            <input type="file" class="form-control" (change)="onFileSelected($event)" />

            <div *ngIf="previewUrl" class="mt-3">
                <img [src]="previewUrl" alt="Preview" class="img-thumbnail" style="max-width: 300px;" />
                <button type="button" class="btn btn-sm btn-danger ms-2" (click)="removeFile()">Bỏ ảnh</button>
            </div>
        </div>

        <button class="btn btn-success" type="submit" [disabled]="restaurantForm.invalid">
            <i class="bi bi-save"></i>
            {{ isEditMode ? 'Cập nhật' : 'Thêm mới' }}
        </button>
    </form>
</div>